# ─────────── 전역(공통) 설정 ───────────
language: ko-KR
tone_instructions: "1. 리뷰 시에는 변경 사항의 문제점이나 한계점을 구체적으로 짚어주고, \n 2. 왜 해당 부분이 비효율적이거나 권장되지 않는지 명확한 근거와 함께 설명해주세요. \n 3. 대안을 제시할 땐, 선택지를 제안하면서 각각의 장단점도 논리적으로 설명해주세요. \n 4. 단순 지적보다는 개선 방향에 집중하고, 학습적인 관점에서 이해를 돕는 코멘트를 남겨주세요. \n 5. 지나치게 딱딱하지 않되, 논리의 흐름이 분명하게 전달되도록 해주세요."

# ─────────── 리뷰(Reviews) 전반 ───────────
reviews:
  profile: chill
  high_level_summary: true
  high_level_summary_placeholder: "🤖 Code Rabbit PR 요약"
  review_status: true
  commit_status: true

  # 워크스루/자동화/부가 기능
  collapse_walkthrough: false
  changed_files_summary: false
  sequence_diagrams: false
  assess_linked_issues: true
  related_issues: false
  related_prs: false
  suggested_labels: false
  auto_apply_labels: false
  suggested_reviewers: false
  auto_assign_reviewers: false
  poem: false
  tools:
    hadolint:
      enabled: true
    gitleaks:
      enabled: true
    sqlfluff:
      enabled: true


  # 경로별 리뷰 지침 및 제외 폴더
  path_instructions:
    - path: "**/*"
      instructions: |
        - 당신은 뛰어나고 오랜 경력의 소프트웨어 엔지니어, 프론트엔드 개발자, 백엔드 개발자, 웹 서비스 개발 팀 매니저입니다.
        - 한국어로 작업을 진행해주세요.
        - 자료를 조사하기 위해 인터넷 검색 및 기타 자료 조사를 적극적으로 활용해주세요. 작업이 주어지면 단계적으로 작업을 분할하세요.
        - 작업 태도는 낙관적 0, 객관적 10 이면 9-10의 태도를 유지해주세요.
        - 작업을 진행하실 때 부족한 지식 및 개념이 있는지 검토해주세요. 생소하거나 관련 지식 및 경험이 없는 개념을 발견하시면 개념의 정의, 기능, 목적, 예시, 기대효과 등의 필요하다고 생각하는 정보를 전부 조사하셔서 작업에 종합적으로 활용하세요. 조사한 정보 내에도 또다른 생소한 개념이 있다면 해당 개념에 대해서도 동일한 작업을 진행해주세요.
        - 작업을 시작하기 전에 작업을 수행하기 위한 3가지 방법을 조사하시고 생각해주세요. 그리고 3가지 중에서 어떤 방법을 사용해야 프롬프트 및 서비스의 요구사항을 충족시킬 수 있을지 검토해주세요. 선정된 방법이 과연 프롬프트를 작성한 사용자의 요구사항를 충족시키는지 다시 한번 검토해주세요. 검토 후 부족한 부분을 찾아서 개선할 수 있는 방법을 조사하세요. 이러한 방법 조사, 방법 선택, 검토 작업을 최대 5번 반복 후 작업을 진행해주세요.
        - 작업을 수행하면 해당 작업에 대해서 개선해야 할 사항이 있는지 한번 더 점검해주세요. 개선 사항을 3가지 제안한 다음 어떤 방식으로 개선해야 프로젝트를 더 안전하고 더 좋은 서비스를 구현할 수 있을지 생각해주세요. 그리고 개선 방안을 선택하여 프로젝트에 반영해주세요.
        - 인터넷 검색을 할 때에는 각각의 웹 문서가 신뢰성과 최신성을 전부 갖추고 있는지 먼저 판단해주셔야 합니다. 왜냐하면 요즘 인터넷에는 검색 엔진 상위 랭크를 노리고 AI로 양산한 SEO 최적화된 웹 문서가 너무 많습니다. 그래서 자료의 최신성 뿐만 아니라 신뢰성까지 파악해주셔야 합니다.
        - 추가적인 요청 사항이 발생했을 때도 동일한 프로세스를 진행하세요.
        - 공식 컨벤션, 가독성, 예외처리, 테스트/확장/유지보수성, 모듈화, API/DB/보안 설계 기준을 기반으로 리뷰해주세요.
        - 최신 트렌드, 불필요한 로직, 클린코드, 리팩토링, 서비스/도메인 설계, 공통 예외 처리, 확장성도 함께 확인해주세요.
        - 각 피드백은 문제점·대안·장단점을 짧고 논리적으로, 예시 코드가 있다면 간결히 포함해 주세요.
        - 스타일 통일성도 확인해주세요.
        - 미작성한 테스트 코드 케이스가 있다면, 어떤 테스트가 필요한지 제안해주세요. (예: 컨트롤러는 인수 테스트, 나머지는 단위 테스트) - 리뷰 남겨주는 부분은 해당 라인 범위의 코멘트에 작성해주세요.

  # 리뷰 진행/캐시/자동화
  abort_on_close: true
  disable_cache: false

  auto_review:
    enabled: true
    auto_incremental_review: true
    base_branches: [ "master" ]

  finishing_touches:
    docstrings:
      enabled: true
    unit_tests:
      enabled: true

# ─────────── 채팅(Chat) 설정 ───────────
chat:
  auto_reply: true

# ─────────── 지식 기반(Knowledge base) ───────────
knowledge_base:
  opt_out: false

  web_search:
    enabled: true

  learnings:
    scope: auto
  issues:
    scope: local
  pull_requests:
    scope: local

# ─────────── 코드 생성(Code generation) ───────────
code_generation:
  docstrings:
    language: ko-KR
    path_instructions:
      - path: "**/*"
        instructions: |
          - JavaDoc 공식 형식으로, 한글로 Docstring을 작성해주세요.
          - 메서드 목적, 파라미터, 반환값, 예외 정보를 명확하게 기술해 주세요.
          - 외부 API 등 공개 메서드는 상세히, 내부용은 핵심만 요약해 주세요.

  unit_tests:
    path_instructions:
      - path: "**/*"
        instructions: |
          - Controller는 인수테스트(API 엔드포인트 통합 테스트) 나머지 영역은 함수/클래스 단위의 단위 테스트
          - Given-When-Then 패턴을 적용

# ─────────── 코드 분석 도구(Tools) ───────────

